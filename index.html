<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
  let noClickCount = 0;
  let escapeMode = false;

  const noBtn = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");
  const card = document.getElementById("card");
  const finalMessage = document.getElementById("finalMessage");

  const noTexts = [
    "No ðŸ™„",
    "Are you sure? ðŸ˜",
    "Think again ðŸ¤”",
    "Really sure? ðŸ˜¶",
    "Stop chasing me ðŸ˜³",
    "Okay this is scary ðŸ˜­",
  ];

  function moveNoButton() {
    const btnWidth = noBtn.offsetWidth;
    const btnHeight = noBtn.offsetHeight;

    const maxX = window.innerWidth - btnWidth - 20;
    const maxY = window.innerHeight - btnHeight - 20;

    const x = Math.random() * maxX;
    const y = Math.random() * maxY;

    noBtn.style.position = "fixed";
    noBtn.style.left = `${x}px`;
    noBtn.style.top = `${y}px`;
  }

  noBtn.addEventListener("click", () => {
    noClickCount++;

    if (noClickCount <= 5) {
      noBtn.textContent = noTexts[noClickCount - 1];
    }

    if (noClickCount === 5) {
      escapeMode = true;
    }
  });

  document.addEventListener("mousemove", (e) => {
    if (!escapeMode) return;

    const rect = noBtn.getBoundingClientRect();
    const distance = Math.hypot(
      rect.x + rect.width / 2 - e.clientX,
      rect.y + rect.height / 2 - e.clientY,
    );

    if (distance < 120) {
      moveNoButton();
    }
  });

  yesBtn.addEventListener("click", () => {
    card.style.display = "none";
    noBtn.style.display = "none";
    finalMessage.style.display = "block";
    document.body.style.background = "#ff4d6d";

    confetti({
      particleCount: 250,
      spread: 100,
      origin: { y: 0.6 },
    });
  });
</script>
